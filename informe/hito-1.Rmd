---
title: "R Notebook"
author: '**Catalina Carrasco, Javiera Donoso, Joaquín Herrera, Macarena Ríos, Nahuel
  Sanhueza**'
output:
  html_document:
    toc: yes
    df_print: paged
  html_notebook:
    toc: yes
    theme: united
  pdf_document:
    toc: yes
---
# Informe Hito 1

## Librerias a importar

```{r}
library(ggplot2)
library(tidyr)
thyroid.df <- read.csv("https://raw.githubusercontent.com/init-nahuel/project-data-mining/main/data/thyroidDF.csv")
```

## Introducción

La tiroides es una glándula ubicada en la base del cuello que produce hormonas esenciales para el funcionamiento del cuerpo. Los trastornos de la tiroides pueden afectar a personas de todas las edades y géneros. Por ejemplo, el hipotiroidismo no tratado puede llevar a problemas como la fatiga crónica, la depresión y la ganancia de peso. Por otro lado, el hipertiroidismo no controlado puede afectar el corazón y otros órganos. De esta manera, el diagnóstico (para un posterior tratamiento) de estas enfermedades es fundamental para mantener una salud óptima.

A continuación se estudiará un dataset estructurado sobre esta afección denominado "Thyroid Disease Data". En él se pueden encontrar diversos datos asociados a los pacientes, junto a sus respectivos resultados de análisis de sangre y diagnóstico efectuado por un profesional.

## Exploración de datos

### Limpieza de datos

### Valores faltantes

Total de valores nulos en el dataset:
```{r}
sprintf("Cantidad de valores nulos: %d", sum(is.na(thyroid.df)))
```

Valores nulos por atributo:
```{r}
sapply(thyroid.df, function(x) sum(is.na(x)))
```

Esta información sirve para realizar un posterior procesamiento de datos según se estime conveniente.

### Valores duplicados

```{r}
sum(duplicated(thyroid.df))
```

Se observa que no existen valores duplicados en el conjunto de datos.

A continuación se presenta la limpieza de datos correspondiente al dataset *Thyroid Disease Data*.

Para la limpieza de datos se aplicó el método de imputación de datos, para esto se reemplaza los valores `NA` de los atributos numéricos *TSH, T3, TT4, TU4 y FTI* por valores cero (0), esto tendrá un efecto no menor al momento de analizar el data, sin embargo se debe tener en cuenta que todos los atributos mencionados corresponden a exámenes médicos donde se mide el nivel de hormonas y proteínas en la sangre, por tanto no es posible obtener como resultado un valor cero, esta imputación se realiza con el fin de no eliminar la instancia completa del dataset, puesto que en muchos casos esta misma instancia posee valores no nulos para los demás atributos, adicionalmente la cantidad de valores `NA` no es demasiada en comparación con la cantidad de filas (instancias) del dataset como se observa en el anterior código adjunto. Dada la imputación de estos valores para los correspondientes atributos, es necesario mencionar que como consecuencia es posible eliminar los atributos *TSH_measured, T3_measured, TT4_measured, T4U_measured, FTI_measured *, debido a que no será necesario conocer si un paciente se realizó o no un examen médico, esto ahora se analizará observando las instancias para las cuales los correspondientes atributos posean un valor cero

Asimismo, se eliminaron los atributos categóricos *TBG, TBG_measured* dado que la cantidad de valores `NA` para el atributo *TBG* era 8823, por tanto no era posible una imputación de datos sin afectar de manera considerable el dataset. Por último, se eliminaron los atributos *referral_source y patient_id* debido a que la información entregada por estos atributos no es provechosa.

```{r}
thyroid.df <- replace_na(thyroid.df, list(TSH=0, T3=0, TT4=0, T4U=0, FTI=0)) # Imputacion
thyroid.df <- thyroid.df[,!names(thyroid.df) %in% c("TSH_measured", "T3_measured", "TT4_measured", "T4U_measured", "FTI_measured", "TBG_measured", "TBG", "referral_source", "patient_id")] # Eliminacion atributos
sprintf("Cantidad de valores nulos en el dataset: %d", sum(is.na(thyroid.df)))
```

### Características de los datos

Los distintos atributos que contiene el dataset se presentan a continuación:

1. age : edad del paciente (int)

2. sex : el sexo del paciente (str)

3. on_thyroxine : si el paciente está tomando tiroxina (bool)

4. query_on_thyroxine : si el paciente está tomando tiroxina (bool)

5. on_antithyroid_meds : si el paciente está tomando medicamentos antitiroideos (bool)

6. sick : si el paciente está enfermo (bool)

7. pregnant : si la paciente está embarazada (bool)

8. thyroid_surgery : si el paciente se ha sometido a una cirugía de tiroides (bool)

9. I131_treatment : si el paciente está recibiendo tratamiento I131 (para el manejo de trastornos tiroideos) (bool)

10. query_hypotoideo : si el paciente cree que tiene hipotiroidismo (bool)

11. query_hyperthyroid : si el paciente cree que tiene hipertiroidismo (bool)

12. lithium : si el paciente * litio (bool)

13. goitre : si el paciente tiene bocio (bool)

14. tumor : si el paciente tiene tumor (bool)

15. hypopituitary : si el paciente * glándula hipopituitaria (bool)

16. psych : si paciente * psych (bool)

17. TSH_measured : si la TSH se midió en la sangre (bool)

18. TSH : nivel de TSH en sangre según análisis de laboratorio (float)

19. T3_measured : si se midió T3 en la sangre (bool)

20. T3 : nivel de T3 en sangre según análisis de laboratorio (float)

21. TT4_measured : si se midió TT4 en la sangre (bool)

22. TT4 : nivel de TT4 en sangre procedente de análisis de laboratorio (float)

23. T4U_measured : si se midió T4U en la sangre (bool)

24. T4U : nivel de T4U en sangre según análisis de laboratorio (float)

25. FTI_measured : si el FTI se midió en la sangre (bool)

26. FTI : nivel de FTI en sangre según análisis de laboratorio (float)

27. TBG_measured : si se midió TBG en la sangre (bool)

28. TBG : nivel de TBG en sangre según análisis de laboratorio (float)

29. referral_source : (str)

30. target : diagnóstico médico de hipertiroidismo (str)

31. patient_id : identificación única del paciente (str)

Como se puede apreciar, la mayoría de los atributos son categóricos (de tipo bool). Por otro lado, los datos de tipo float asociados a los niveles en el análisis de sangre se podrían comparar (previa normalización) para extraer resultados.

Por último, para tener un mejor entendimiento de la situación es importante mencionar las principales características de las hormonas a estudiar. La triyodotironina (T3) y la tiroxina (TT4 o T4) son hormonas extremadamente importantes en el sistema endocrino, y cumplen varias funciones clave en el organismo, tales como la regulación del metabolismo, la regulación de la temperatura corporal, el desarrollo y crecimiento, entre otros. Por otro lado, la hormona estimulante de la tiroides (TSH) tiene como función principal la de estimular la glándula tiroides para que produzca y libere las hormonas tiroideas (T3 y T4) en la sangre. Los valores asociados a T4U, FTI y TBG son índices que muestran los niveles de: captación de tiroxina, tiroxina libre (en la sangre) y globulina transportadora de tiroxina (proteína que se encuentra en el torrente sanguíneo y tiene la función específica de unir y transportar las hormonas tiroideas), respectivamente.

### Diagramas de Dispersion para Atributos Numericos

```{r}
numeric.attrs <- thyroid.df[,c("age", "TSH", "T3", "TT4", "T4U", "FTI")]
pairs(numeric.attrs)
```

En base a lo observado en los distintos diagramas de dispersión nos concentraremos en los diagramas cuya relación sea entre los niveles de hormona TSH en la sangre y los niveles de hormona en la sangre para T3, T4 y la proteina TBG, esto pues son los principales agentes detectores de la enfermedad de la tiroides.

```{r}
ggplot(thyroid.df) + 
  geom_point(aes(x=TSH, y=T3, color=target)) +
  ggtitle("Nivel de hormona TSH vs T3 en la sangre") + xlab("TSH") + ylab("T3") + labs(color="Diagnóstico médico hipertiroidismo")

ggplot(thyroid.df) +
  geom_point(aes(x=TSH, y=TT4, color=target)) +
  ggtitle("Nivel de hormona TSH vs T4 en la sangre") + xlab("TSH")  + ylab("T4") + labs(color="Diagnóstico médico hipertiroidismo")
```

## Preguntas y Problemas

## Anexo


